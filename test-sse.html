<!DOCTYPE html>
<html>
<head>
    <title>SSE Test</title>
</head>
<body>
    <h1>Real-time Updates Test</h1>
    <div id="status">Disconnected</div>
    <div id="messages"></div>
    
    <script>
        // Replace with a real admin token
        const token = 'YOUR_ADMIN_TOKEN_HERE';
        
        const eventSource = new EventSource(`http://localhost:3000/api/sse/subscribe?token=${encodeURIComponent(token)}`);
        
        eventSource.onopen = function(event) {
            document.getElementById('status').innerHTML = '<span style="color: green;">Connected to SSE</span>';
        };
        
        eventSource.onmessage = function(event) {
            const data = JSON.parse(event.data);
            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML += `<div><strong>${data.type}:</strong> ${JSON.stringify(data)}</div>`;
        };
        
        eventSource.onerror = function(event) {
            document.getElementById('status').innerHTML = '<span style="color: red;">SSE Error</span>';
            console.error('SSE Error:', event);
        };
    </script>
</body>
</html>
